{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Familia</title>
    <link rel="stylesheet" href="{% static 'css/test_style.css' %}">
</head>
<body>
    <h1>Informacion familiar</h1>

    <div class="form-container">
        <form action="/situacion_familiar_enviar/" method="POST">
            {% csrf_token %}
            
            <h1 class="titulo">Super test</h1>

            <div class="form-group">
                <strong>Estado civil?</strong>
                <input name="Estado_civil" placeholder="Estado civil" type="text" id="Estado_civil" required>
            </div>

            <div class="form-group">
                <strong>¿Con quien vives en tu hogar?</strong>
                <input name="convivencia" placeholder="convivencia" type="text" id="convivencia" required>
            </div>

            <div class="form-group">
                <strong>¿Apoyo familiar sobre tu futuro?</strong>
                <input name="Apoyo" placeholder="Apoyo" type="text" id="Apoyo" required>
            </div>

            <div class="form-group">
                <strong>¿Sufres algún problema familiar en tu hogar?</strong><br>
                <input name="problema_familiar" placeholder="Describe brevemente..." type="text" id="problema_familiar" required>
                <label>
                    <input type="checkbox" id="no_responder_problema" onclick="toggleInput('problema_familiar', this)">
                    Prefiero no responder
                </label>
            </div>

            <div class="form-group">
                <strong>¿Cómo es tu relación con tu familia?</strong><br>
                <input name="relacion_familiar" placeholder="Describe brevemente..." type="text" id="relacion_familiar" required>
                <label>
                    <input type="checkbox" id="no_responder_relacion" onclick="toggleInput('relacion_familiar', this)">
                    Prefiero no responder
                </label>
            </div>

            <script>
            function toggleInput(inputId, checkbox) {
                const input = document.getElementById(inputId);

                if (checkbox.checked) {
                    // Marcar "Prefiero no responder": hacer readonly y quitar required
                    input.value = "Prefiero no responder";
                    input.readOnly = true;           // mantiene el valor pero evita edición
                    input.removeAttribute('required'); // evita validación HTML
                } else {
                    // Volver a permitir respuesta libre: limpiar, habilitar y exigir si corresponde
                    input.value = "";
                    input.readOnly = false;
                    input.setAttribute('required', ''); // vuelve a ser obligatorio
                    input.focus();
                }
            }
            </script>

            <button type="submit" id="button">Enviar</button>

            <div class="separador"></div>

            {% if error_message %}
                <div class="error-message">{{ error_message }}</div>    
            {% endif %}

            <div class="volver">
                <a href="oficial/" class="link">Volver</a>
            </div>
        </form>
    </div>
</body>
</html>